<!doctype html><html><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta http-equiv=Accept-CH content="DPR, Viewport-Width, Width"><link rel=icon href=/fav.png type=image/gif><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" media=print onload='this.media="all"'><noscript><link href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel=stylesheet></noscript><link rel=stylesheet href=/css/font.css media=all><meta property="og:url" content="https://containeers.github.io/blogs/thirdparty_helm/"><meta property="og:site_name" content="Containeers"><meta property="og:title" content="Mastering Third-Party Helm Charts: Enterprise Best Practices"><meta property="og:description" content="Best practices for managing third-party Helm charts in your enterprise"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blogs"><meta property="article:published_time" content="2025-01-31T18:00:00+00:00"><meta property="article:modified_time" content="2025-01-31T18:00:00+00:00"><meta property="article:tag" content="Helm"><meta property="article:tag" content="Kubernetes"><meta property="article:tag" content="DevOps"><meta name=twitter:card content="summary"><meta name=twitter:title content="Mastering Third-Party Helm Charts: Enterprise Best Practices"><meta name=twitter:description content="Best practices for managing third-party Helm charts in your enterprise"><link rel=stylesheet href=/bootstrap-5/css/bootstrap.min.css media=all><link rel=stylesheet href=/css/header.css media=all><link rel=stylesheet href=/css/footer.css media=all><link rel=stylesheet href=/css/theme.css media=all><style>:root{--text-color:#343a40;--text-secondary-color:#6c757d;--text-link-color:#007bff;--background-color:#eaedf0;--secondary-background-color:#64ffda1a;--primary-color:#007bff;--secondary-color:#f8f9fa;--text-color-dark:#e4e6eb;--text-secondary-color-dark:#b0b3b8;--text-link-color-dark:#ffffff;--background-color-dark:#18191a;--secondary-background-color-dark:#212529;--primary-color-dark:#ffffff;--secondary-color-dark:#212529}body{font-size:1rem;font-weight:400;line-height:1.5;text-align:left}html{background-color:var(--background-color) !important}body::-webkit-scrollbar{height:0;width:8px;background-color:var(--background-color)}::-webkit-scrollbar-track{border-radius:1rem}::-webkit-scrollbar-thumb{border-radius:1rem;background:#b0b0b0;outline:1px solid var(--background-color)}#search-content::-webkit-scrollbar{width:.5em;height:.1em;background-color:var(--background-color)}</style><meta name=description content="Best practices for managing third-party Helm charts in your enterprise"><link rel=stylesheet href=/css/single.css><script defer src=/fontawesome-6/all-6.4.2.js></script><title>Mastering Third-Party Helm Charts: Enterprise Best Practices | Containeers</title></head><body class=light><script>let localStorageValue=localStorage.getItem("pref-theme"),mediaQuery=window.matchMedia("(prefers-color-scheme: dark)").matches;switch(localStorageValue){case"dark":document.body.classList.add("dark");break;case"light":document.body.classList.remove("dark");break;default:mediaQuery&&document.body.classList.add("dark");break}</script><script>var prevScrollPos=window.pageYOffset;window.addEventListener("scroll",function(){let s=document.getElementById("profileHeader"),t=window.pageYOffset,n=!1,o=!0,i=o?prevScrollPos>t:t>0;i?s.classList.add("showHeaderOnTop"):n=!0,t===0&&(n=!0),n&&s.classList.remove("showHeaderOnTop"),prevScrollPos=t})</script><header id=profileHeader><nav class="pt-3 navbar navbar-expand-lg animate"><div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5"><a class="navbar-brand primary-font text-wrap" href=/><img src=/fav.png width=30 height=30 class="d-inline-block align-top">
Containeers</a><div><input id=search autocomplete=off class="form-control mr-sm-2 d-none d-md-block" placeholder='Ctrl + k to Search...' aria-label=Search oninput=searchOnChange(event)></div><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarContent aria-controls=navbarContent aria-expanded=false aria-label="Toggle navigation">
<svg aria-hidden="true" height="24" viewBox="0 0 16 16" width="24" data-view-component="true"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button><div class="collapse navbar-collapse text-wrap primary-font" id=navbarContent><ul class="navbar-nav ms-auto text-center"><li class="nav-item navbar-text d-block d-md-none"><div class=nav-link><input id=search autocomplete=off class="form-control mr-sm-2" placeholder='Ctrl + k to Search...' aria-label=Search oninput=searchOnChange(event)></div></li><li class="nav-item navbar-text"><a class=nav-link href=/#about aria-label=about>About Me</a></li><li class="nav-item navbar-text"><a class=nav-link href=/#experience aria-label=experience>Experience</a></li><li class="nav-item navbar-text"><a class=nav-link href=/#achievements aria-label=achievements>Achievements</a></li><li class="nav-item navbar-text"><a class=nav-link href=/#contact aria-label=contact>Contact</a></li><li class="nav-item navbar-text"><a class=nav-link href=/blogs title="Blog posts">Blog</a></li><li class="nav-item navbar-text"><div class=text-center><button id=theme-toggle>
<svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></li></ul></div></div></nav></header><div id=content><section id=single><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-md-12 col-lg-9"><div class=pr-lg-4><div class="title mb-5"><h1 class="text-center mb-4">Mastering Third-Party Helm Charts: Enterprise Best Practices</h1><div class=text-center>Sandarsh
<small>|</small>
Jan 31, 2025
<span id=readingTime>min read</span></div></div><div class=featured-image><img class="img-fluid mx-auto d-block" src=https://miro.medium.com/v2/resize:fit:1400/0*Gy_wQXQfn93tuyO7 alt="Mastering Third-Party Helm Charts: Enterprise Best Practices"></div><article class="page-content p-2"><p>Helm has become Kubernetes&rsquo;s de facto package manager, allowing teams to deploy applications efficiently. However, enterprises often rely on third-party Helm charts from sources like GitHub, artifacthub, ECR or quay. While these charts offer convenience, using them without proper governance can expose organizations to security risks, operational inefficiencies, and compliance issues.</p><p>Consider a scenario where you rely on the ServiceMonitor CR or specific common labels for monitoring, but the third-party Helm chart does not provide the necessary templates or customization options in <code>helm templates</code>. Additionally, if you need to manage the chart in Git and deploy it using GitOps in an air-gapped environment, maintaining consistency and security becomes even more challenging. This is where an Overlay Chart comes to the rescue.</p><h2 id=what-is-a-overlay-chart>What is a Overlay Chart?</h2><p>A Overlay Chart is a Helm chart that acts as a layer around a third-party Helm chart, allowing customization and compliance enforcement without modifying the upstream chart. This method provides better control, maintainability, and consistency.</p><h3 id=why-use-overlay-charts>Why Use Overlay Charts?</h3><p>✔ Avoids direct modifications to third-party charts, making future updates easier.<br>✔ Allows enterprises to apply custom configurations, security policies, and monitoring settings.<br>✔ Ensures internal compliance standards are met before deploying third-party applications.</p><h2 id=steps-for-enterprise-usage>Steps for enterprise usage.</h2><h3 id=1-use-an-internal-helm-repository>1. Use an Internal Helm Repository</h3><h4 id=why>Why?</h4><p>Directly pulling third-party Helm charts from public repositories like ArtifactHub, Bitnami, Quay, etc increases security risks and dependency on external sources.</p><h4 id=best-practices>Best Practices:</h4><p>✔ Store third-party Helm charts in an internal repository such as Harbor, JFrog Artifactory, or AWS ECR.<br>✔ Only approved, security-scanned charts should be stored in the internal registry.<br>✔ Automate chart version synchronization from upstream sources but with approval processes.<br>✔ Maintain audit logs of chart usage and updates.</p><h5 id=example-pulling-and-storing-a-third-party-chart>Example: Pulling and Storing a Third-Party Chart</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx  
</span></span><span style=display:flex><span>helm pull ingress-nginx/ingress-nginx --version 4.12.0  
</span></span><span style=display:flex><span>helm push ingress-nginx-4.12.0.tgz oci://my-internal-registry/myhelm
</span></span></code></pre></div><h3 id=2-overlay-chart-with-pinned-chart-versions>2. Overlay Chart with Pinned Chart Versions</h3><h4 id=why-1>Why?</h4><p>Using the latest or unpinned versions can introduce breaking changes or security vulnerabilities.</p><h4 id=best-practices-1>Best Practices:</h4><p>✔ Always specify a pinned version in <code>Chart.yaml</code>.<br>✔ Maintain a staging/testing environment before upgrading charts in production.<br>✔ Use Helm Diff Plugin to compare releases before upgrades.</p><p>Below is the option on creating overlay chart and associate versions</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#Sample Step to create overlay chart  </span>
</span></span><span style=display:flex><span>helm create ingress-nginx-overlay  
</span></span><span style=display:flex><span>tree ingress-nginx-overlay  
</span></span><span style=display:flex><span>ingress-nginx-overlay  
</span></span><span style=display:flex><span>├── Chart.yaml  
</span></span><span style=display:flex><span>├── charts  
</span></span><span style=display:flex><span>├── templates  
</span></span><span style=display:flex><span>│   ├── NOTES.txt  
</span></span><span style=display:flex><span>│   ├── _helpers.tpl  
</span></span><span style=display:flex><span>│   ├── deployment.yaml  
</span></span><span style=display:flex><span>│   ├── hpa.yaml  
</span></span><span style=display:flex><span>│   ├── ingress.yaml  
</span></span><span style=display:flex><span>│   ├── service.yaml  
</span></span><span style=display:flex><span>│   ├── serviceaccount.yaml  
</span></span><span style=display:flex><span>│   └── tests  
</span></span><span style=display:flex><span>│       └── test-connection.yaml  
</span></span><span style=display:flex><span>└── values.yaml  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span> directories, <span style=color:#ae81ff>10</span> files  
</span></span><span style=display:flex><span><span style=color:#75715e>#remove template files which you may not need it for eg  </span>
</span></span><span style=display:flex><span>find templates -type f -name <span style=color:#e6db74>&#34;\*yaml&#34;</span> -exec rm <span style=color:#f92672>{}</span> <span style=color:#ae81ff>\\</span>;  
</span></span><span style=display:flex><span>rm values.yaml; touch values.yaml
</span></span></code></pre></div><h5 id=example-pinning-a-chart-version-inchartyaml>Example: Pinning a Chart Version in <code>Chart.yaml</code></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e>#Update Chart.yaml with dependencies  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>dependencies</span>:  
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>ingress-nginx  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;4.12.0&#34;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>repository</span>: <span style=color:#e6db74>&#34;oci://my-internal-registry/myhelm&#34;</span>
</span></span></code></pre></div><h5 id=example-chartyaml-file>Example: Chart.yaml file</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v2  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>ingress-nginx-overlay  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#e6db74>&#34;An overlay Helm chart for customizing Ingress Nginx&#34;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>application  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#ae81ff>0.1.0</span>  <span style=color:#75715e># The version of this overlay chart  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>appVersion</span>: <span style=color:#e6db74>&#34;4.12.0&#34;</span>  <span style=color:#75715e># Can track actual ingress specific versions  </span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e># Declare Dependencies (Traditional Helm Repo or OCI)  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>dependencies</span>:  
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>ingress-nginx  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;4.12.0&#34;</span>  <span style=color:#75715e># Pin a specific version to avoid breaking changes  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>repository</span>: <span style=color:#e6db74>&#34;oci://my-internal-registry/myhelm&#34;</span>  <span style=color:#75715e># Use OCI if applicable  </span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e># Annotations for Documentation &amp; GitOps Best Practices  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span>:  
</span></span><span style=display:flex><span>  <span style=color:#f92672>category</span>: <span style=color:#e6db74>&#34;Networking&#34;</span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>createdBy</span>: <span style=color:#e6db74>&#34;Platform Team&#34;</span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>documentation</span>: <span style=color:#e6db74>&#34;https://kubernetes.github.io/ingress-nginx&#34;</span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>support</span>: <span style=color:#e6db74>&#34;support@yourcompany.com&#34;</span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>sourceRepo</span>: <span style=color:#e6db74>&#34;https://github.com/kubernetes/ingress-nginx&#34;</span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>oci-dependencies</span>: <span style=color:#e6db74>&#34;my-internal-registry/myhelm/ingress-nginx:4.12.0&#34;</span>  <span style=color:#75715e># Track OCI dependencies explicitly  </span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e># Secure &amp; Traceable Maintainers  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>maintainers</span>:  
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;Platform Team&#34;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>email</span>: <span style=color:#e6db74>&#34;platform@yourcompany.com&#34;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;https://yourcompany.com/platform-security&#34;</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e># Keywords for Better Searchability &amp; Tracking  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>keywords</span>:  
</span></span><span style=display:flex><span>  - <span style=color:#e6db74>&#34;ingress&#34;</span>  
</span></span><span style=display:flex><span>  - <span style=color:#e6db74>&#34;nginx&#34;</span>  
</span></span><span style=display:flex><span>  - <span style=color:#e6db74>&#34;overlay&#34;</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e># Dependencies Are Managed with `helm dependency update`  </span>
</span></span><span style=display:flex><span><span style=color:#75715e># This ensures we always use an internally approved version.</span>
</span></span></code></pre></div><h5 id=overlay-a-sample-extra-resource-configuration>Overlay a sample extra resource configuration</h5><p>Lets consider an example you need to add an extra resource to the default chart. i.e. add an extra kubernetes service and would like to expose internal 8080 port than the default Controller Service</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e>#Content of resource ingress-nginx-overlay/templates/extra-controller-service.yaml  </span>
</span></span><span style=display:flex><span>{{- <span style=color:#ae81ff>if .Values.extraControllerService.enabled }}  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Service  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:  
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: {{ <span style=color:#ae81ff>.Release.Name }}-extra-controller-service  </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: {{ <span style=color:#ae81ff>.Release.Namespace }}  </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>labels</span>:  
</span></span><span style=display:flex><span>    <span style=color:#f92672>app.kubernetes.io/name</span>: <span style=color:#ae81ff>ingress-nginx  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>app.kubernetes.io/instance</span>: {{ <span style=color:#ae81ff>.Release.Name }}  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:  
</span></span><span style=display:flex><span>  <span style=color:#f92672>type</span>: {{ <span style=color:#ae81ff>.Values.extraControllerService.type }}  </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>selector</span>:  
</span></span><span style=display:flex><span>    <span style=color:#f92672>app.kubernetes.io/name</span>: <span style=color:#ae81ff>ingress-nginx  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>app.kubernetes.io/instance</span>: {{ <span style=color:#ae81ff>.Release.Name }}  </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>ports</span>:  
</span></span><span style=display:flex><span>    {{- <span style=color:#ae81ff>range .Values.extraControllerService.ports }}  </span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: {{ <span style=color:#ae81ff>.name }}  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>port</span>: {{ <span style=color:#ae81ff>.port }}  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>targetPort</span>: {{ <span style=color:#ae81ff>.targetPort }}  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>protocol</span>: {{ <span style=color:#ae81ff>.protocol }}  </span>
</span></span><span style=display:flex><span>    {{- <span style=color:#ae81ff>end }}  </span>
</span></span><span style=display:flex><span>{{- <span style=color:#ae81ff>end }}  </span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>#Update Values.yaml  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>extraControllerService</span>:  
</span></span><span style=display:flex><span>  <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>ClusterIP </span> <span style=color:#75715e># Change to ClusterIP/NodePort if required  </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>ports</span>:  
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>extra-http  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>port</span>: <span style=color:#ae81ff>8080</span>  
</span></span><span style=display:flex><span>      <span style=color:#f92672>targetPort</span>: <span style=color:#ae81ff>80</span>  
</span></span><span style=display:flex><span>      <span style=color:#f92672>protocol</span>: <span style=color:#ae81ff>TCP</span>
</span></span></code></pre></div><h5 id=example-helm-diff-for-upgrade-validation>Example: Helm Diff for Upgrade Validation</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm diff upgrade ingress-nginx-overlay my-internal-repo/ingress-nginx-overlay
</span></span></code></pre></div><h3 id=3-scan-for-security-vulnerabilities>3. Scan for Security Vulnerabilities</h3><h4 id=why-2>Why?</h4><p>Third-party charts might introduce security vulnerabilities through container images or misconfigurations.</p><h4 id=best-practices-2>Best Practices:</h4><p>✔ Use Trivy or Grype to scan Helm charts & the associated container image for vulnerabilities before deployment.<br>✔ Enforce non-root execution and minimal container privileges.<br>✔ Use Gatekeeper or Kyverno to enforce security standards.</p><h5 id=example-scanning-a-helm-chart-for-vulnerabilities>Example: Scanning a Helm Chart for Vulnerabilities</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>trivy helm my-internal-registry/myhelm/ingress-nginx
</span></span></code></pre></div><h3 id=4-override-default-configurations-securely>4. Override Default Configurations Securely</h3><h4 id=why-3>Why?</h4><p>Default values in third-party Helm charts may not align with enterprise security and performance policies.</p><h4 id=best-practices-3>Best Practices:</h4><p>✔ Store overrides in a dedicated <code>values.yaml</code> file instead of modifying the upstream chart.<br>✔ Disable unused features to reduce the attack surface.<br>✔ Ensure sensitive values (e.g., passwords, API keys) are managed via Sealed Secrets or Vault.</p><h5 id=example-securevaluesyamloverride>Example: Secure <code>values.yaml</code> Override</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>controller</span>:  
</span></span><span style=display:flex><span>  <span style=color:#f92672>service</span>:  
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>ClusterIP </span> <span style=color:#75715e># Prevent exposure to public internet  </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>securityContext</span>:  
</span></span><span style=display:flex><span>    <span style=color:#f92672>runAsUser</span>: <span style=color:#ae81ff>1001</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>runAsNonRoot</span>: <span style=color:#66d9ef>true</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>allowPrivilegeEscalation</span>: <span style=color:#66d9ef>false</span>
</span></span></code></pre></div><h3 id=5-implement-cicd-and-gitops-for-helm-deployments>5. Implement CI/CD and GitOps for Helm Deployments</h3><h4 id=why-4>Why?</h4><p>Manual Helm deployments lead to inconsistencies and lack of traceability.</p><h4 id=best-practices-4>Best Practices:</h4><p>✔ Use GitOps tools like ArgoCD or FluxCD to automate Helm deployments. ✔ Integrate Helm into CI/CD pipelines (GitHub Actions, GitLab CI, Jenkins).<br>✔ Enable automated rollback in case of failed upgrades.</p><h5 id=example-argocdrancher-fleet-application-for-helm>Example: ArgoCD/Rancher Fleet Application for Helm</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>argoproj.io/v1alpha1  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Application  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:  
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>ingress-nginx-overlay  </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>argocd </span> <span style=color:#75715e># Ensure ArgoCD is installed in this namespace  </span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:  
</span></span><span style=display:flex><span>  <span style=color:#f92672>project</span>: <span style=color:#ae81ff>default </span> <span style=color:#75715e># Change if using a custom ArgoCD project  </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>source</span>:  
</span></span><span style=display:flex><span>    <span style=color:#f92672>repoURL</span>: <span style=color:#e6db74>&#34;https://github.com/your-username/ingress-nginx-overlay.git&#34;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>targetRevision</span>: <span style=color:#ae81ff>main </span> <span style=color:#75715e># Adjust based on your branch/tag  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>ingress-nginx-overlay </span> <span style=color:#75715e># Path where the overlay Helm chart is stored  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>helm</span>:  
</span></span><span style=display:flex><span>      <span style=color:#f92672>valueFiles</span>:  
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>values.yaml </span> <span style=color:#75715e># Use this file to pass custom values  </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>destination</span>:  
</span></span><span style=display:flex><span>    <span style=color:#f92672>server</span>: <span style=color:#ae81ff>https://kubernetes.default.svc </span> <span style=color:#75715e># Deploy to the in-cluster Kubernetes API  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>ingress-nginx </span> <span style=color:#75715e># Target namespace for deployment  </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>syncPolicy</span>:  
</span></span><span style=display:flex><span>    <span style=color:#f92672>automated</span>:  
</span></span><span style=display:flex><span>      <span style=color:#f92672>prune</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Automatically remove resources not in Git  </span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>selfHeal</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Auto-sync if drift is detected  </span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>syncOptions</span>:  
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>CreateNamespace=true </span> <span style=color:#75715e># Ensure the namespace exists before deploying</span>
</span></span></code></pre></div><h3 id=6-monitor-and-audit-helm-releases>6. Monitor and Audit Helm Releases</h3><h4 id=why-5>Why?</h4><p>Lack of visibility into Helm releases can lead to undetected misconfigurations or security incidents.</p><h4 id=best-practices-5>Best Practices:</h4><p>✔ Use Prometheus, Loki, or ELK for monitoring and logging Helm deployments.<br>✔ Periodically audit Helm releases using <code>helm history</code>.<br>✔ Set up alerts for misconfigurations and policy violations.</p><h5 id=example-checking-helm-release-history>Example: Checking Helm Release History</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm history ingress-nginx-overlay
</span></span></code></pre></div><h3 id=7-enable-rollback-and-backup-strategies>7. Enable Rollback and Backup Strategies</h3><h4 id=why-6>Why?</h4><p>Failed Helm upgrades can lead to downtime and data loss.</p><h4 id=best-practices-6>Best Practices:</h4><p>✔ Enable Helm rollback capabilities.<br>✔ Use Velero to back up Kubernetes resources before upgrades.<br>✔ Define health checks and readiness probes for controlled rollouts.</p><h5 id=example-helm-rollback-command>Example: Helm Rollback Command</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm rollback ingress-nginx-overlay <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><h5 id=example-backup-helm-resources-with-velero>Example: Backup Helm Resources with Velero</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>velero backup create ingress-nginx-overlay-backup --include-namespaces web
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>Managing third-party Helm charts in an enterprise requires a structured approach to security, governance, and automation. The table below summarizes the key best practices:</p><table><thead><tr><th>Best Practice</th><th>Key Benefit</th></tr></thead><tbody><tr><td>Use an Internal Helm Repository</td><td>Secure and control charts</td></tr><tr><td>Pin and Validate Chart Versions</td><td>Prevent unexpected failures</td></tr><tr><td>Scan for Security Vulnerabilities</td><td>Identify risks before deploy</td></tr><tr><td>Override Default Configurations</td><td>Align with security policies</td></tr><tr><td>Implement CI/CD and GitOps</td><td>Ensure consistency & traceability</td></tr><tr><td>Monitor and Audit Helm Releases</td><td>Improve visibility & troubleshooting</td></tr><tr><td>Enable Rollback and Backup Strategies</td><td>Reduce downtime & data loss</td></tr></tbody></table><p>Organizations can ensure secure, stable, and scalable Kubernetes workloads by implementing these best practices.</p><p>Credits: Photo by <a href="https://unsplash.com/@hannahbusing?utm_source=medium&amp;utm_medium=referral">Hannah Busing</a> on <a href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral">Unsplash</a></p></article></div></div><div class="col-sm-12 col-md-12 col-lg-3"><div id=stickySideBar class=sticky-sidebar><aside class=toc><h5>Table Of Contents</h5><div class=toc-content><nav id=TableOfContents><ul><li><a href=#what-is-a-overlay-chart>What is a Overlay Chart?</a><ul><li><a href=#why-use-overlay-charts>Why Use Overlay Charts?</a></li></ul></li><li><a href=#steps-for-enterprise-usage>Steps for enterprise usage.</a><ul><li><a href=#1-use-an-internal-helm-repository>1. Use an Internal Helm Repository</a></li><li><a href=#2-overlay-chart-with-pinned-chart-versions>2. Overlay Chart with Pinned Chart Versions</a></li><li><a href=#3-scan-for-security-vulnerabilities>3. Scan for Security Vulnerabilities</a></li><li><a href=#4-override-default-configurations-securely>4. Override Default Configurations Securely</a></li><li><a href=#5-implement-cicd-and-gitops-for-helm-deployments>5. Implement CI/CD and GitOps for Helm Deployments</a></li><li><a href=#6-monitor-and-audit-helm-releases>6. Monitor and Audit Helm Releases</a></li><li><a href=#7-enable-rollback-and-backup-strategies>7. Enable Rollback and Backup Strategies</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></aside><aside class=tags><h5>Tags</h5><ul class="tags-ul list-unstyled list-inline"><li class=list-inline-item><a href=https://containeers.github.io/tags/helm target=_blank>Helm</a></li><li class=list-inline-item><a href=https://containeers.github.io/tags/kubernetes target=_blank>Kubernetes</a></li><li class=list-inline-item><a href=https://containeers.github.io/tags/devops target=_blank>DevOps</a></li></ul></aside><aside class=social><h5>Social</h5><div class=social-content><ul class=list-inline><li class="list-inline-item text-center"><a target=_blank href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcontaineers.github.io%2fblogs%2fthirdparty_helm%2f"><i class="fab fa-linkedin"></i></a></li><li class="list-inline-item text-center"><a target=_blank href="https://twitter.com/share?text=Mastering%20Third-Party%20Helm%20Charts%3a%20Enterprise%20Best%20Practices&url=https%3a%2f%2fcontaineers.github.io%2fblogs%2fthirdparty_helm%2f"><i class="fab fa-twitter"></i></a></li><li class="list-inline-item text-center"><a target=_blank href="https://api.whatsapp.com/send?text=Mastering%20Third-Party%20Helm%20Charts%3a%20Enterprise%20Best%20Practices: https%3a%2f%2fcontaineers.github.io%2fblogs%2fthirdparty_helm%2f"><i class="fab fa-whatsapp"></i></a></li><li class="list-inline-item text-center"><a target=_blank href='mailto:?subject=Mastering%20Third-Party%20Helm%20Charts%3a%20Enterprise%20Best%20Practices&amp;body=Check%20out%20this%20site https%3a%2f%2fcontaineers.github.io%2fblogs%2fthirdparty_helm%2f'><i class="fa fa-envelope"></i></a></li></ul></div></aside></div></div></div><div class=row><div class="col-sm-12 col-md-12 col-lg-9 p-4"></div></div></div><button class="p-2 px-3" onclick=topFunction() id=topScroll>
<i class="fas fa-angle-up"></i></button></section><div class=progress><div id=scroll-progress-bar class=progress-bar role=progressbar aria-valuenow=0 aria-valuemin=0 aria-valuemax=100></div></div><script src=/js/scrollProgressBar.js></script><script>var topScroll=document.getElementById("topScroll");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?topScroll.style.display="block":topScroll.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}let stickySideBarElem=document.getElementById("stickySideBar"),stickyNavBar=!0;if(stickyNavBar){let e=document.getElementById("profileHeader"),t=e.offsetHeight+15;stickySideBarElem.style.top=t+"px"}else stickySideBarElem.style.top="50px"</script><script src=/js/readingTime.js></script></div><footer><div class="container py-3" id=recent-posts><div class="h3 text-center text-secondary py-3">Recent Posts</div><div class="row justify-content-center"><div class="col-lg-4 col-md-6 pt-2"><div class="card h-100"><div class=card-header><a href=/blogs/thirdparty_helm/><img src=https://miro.medium.com/v2/resize:fit:1400/0*Gy_wQXQfn93tuyO7 class=card-img-top alt="Mastering Third-Party Helm Charts: Enterprise Best Practices"></a></div><div class="card-body bg-transparent p-3 shadow-sm"><a href=/blogs/thirdparty_helm/ class="primary-font card-title"><h5 class="card-title bg-transparent" title="Mastering Third-Party Helm Charts: Enterprise Best Practices">Mastering Third-Party …</h5></a><div class="card-text secondary-font"><p><p>Helm has become Kubernetes&rsquo;s de facto package manager, allowing teams to deploy applications efficiently. However, enterprises often rely on third-party Helm charts from sources like GitHub, artifacthub, ECR or quay. While these charts offer convenience, using them without proper governance …</p></p></div></div><div class="mt-auto card-footer"><span class=float-start>Jan 31, 2025</span>
<a href=/blogs/thirdparty_helm/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class="col-lg-4 col-md-6 pt-2"><div class="card h-100"><div class=card-header><a href=/blogs/config_syncer/><img src="https://images.unsplash.com/photo-1667372335936-3dc4ff716017?w=800&amp;auto=format&amp;fit=crop&amp;q=60&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwcm9maWxlLXBhZ2V8MTIyfHx8ZW58MHx8fHx8" class=card-img-top alt="Syncer Operator"></a></div><div class="card-body bg-transparent p-3 shadow-sm"><a href=/blogs/config_syncer/ class="primary-font card-title"><h5 class="card-title bg-transparent" title="Syncer Operator">Syncer Operator</h5></a><div class="card-text secondary-font"><p><p>The Syncer Operator is a Kubernetes operator that provides two Custom Resources to synchronize ConfigMaps and Secrets across namespaces. Built using the Operator SDK framework, it offers flexible and secure resource synchronization capabilities.</p><h2 id=features>Features</h2><ul><li>ConfigMapSync: Sync multiple ConfigMaps from …</li></ul></p></div></div><div class="mt-auto card-footer"><span class=float-start>Jan 24, 2025</span>
<a href=/blogs/config_syncer/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div></div></div><div class="text-center pt-2"><span class=px-1><a href=https://github.com aria-label=github><svg width="2.7em" height="2.7em" viewBox="0 0 1792 1792"><path id="footer-socialNetworks-github-svg-path" d="M522 1352q-8 9-20-3-13-11-4-19 8-9 20 3 12 11 4 19zm-42-61q9 12 0 19-8 6-17-7t0-18q9-7 17 6zm-61-60q-5 7-13 2-10-5-7-12 3-5 13-2 10 5 7 12zm31 34q-6 7-16-3-9-11-2-16 6-6 16 3 9 11 2 16zm129 112q-4 12-19 6-17-4-13-15t19-7q16 5 13 16zm63 5q0 11-16 11-17 2-17-11 0-11 16-11 17-2 17 11zm58-10q2 10-14 14t-18-8 14-15q16-2 18 9zm964-956v960q0 119-84.5 203.5T1376 1664h-224q-16 0-24.5-1t-19.5-5-16-14.5-5-27.5v-239q0-97-52-142 57-6 102.5-18t94-39 81-66.5 53-105T1386 856q0-121-79-206 37-91-8-204-28-9-81 11t-92 44l-38 24q-93-26-192-26t-192 26q-16-11-42.5-27T578 459.5 492 446q-44 113-7 204-79 85-79 206 0 85 20.5 150t52.5 105 80.5 67 94 39 102.5 18q-40 36-49 103-21 10-45 15t-57 5-65.5-21.5T484 1274q-19-32-48.5-52t-49.5-24l-20-3q-21 0-29 4.5t-5 11.5 9 14 13 12l7 5q22 10 43.5 38t31.5 51l10 23q13 38 44 61.5t67 30 69.5 7 55.5-3.5l23-4q0 38 .5 103t.5 68q0 22-11 33.5t-22 13-33 1.5H416q-119 0-203.5-84.5T128 1376V416q0-119 84.5-203.5T416 128h960q119 0 203.5 84.5T1664 416z"/></svg>
</a></span><span class=px-1><a href=https://linkedin.com aria-label=linkedin><svg width="2.4em" height="2.4em" fill="#fff" aria-label="LinkedIn" viewBox="0 0 512 512"><rect width="512" height="512" fill="#0077b5" rx="15%"/><circle cx="142" cy="138" r="37"/><path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg>
</a></span><a href=https://twitter.com aria-label=twitter><svg viewBox="0 0 48 48" width="48" height="48"><path fill="#03a9f4" d="M42 37c0 2.762-2.239 5-5 5H11c-2.762.0-5-2.238-5-5V11c0-2.762 2.238-5 5-5h26c2.761.0 5 2.238 5 5V37z"/><path fill="#fff" d="M36 17.12c-.882.391-1.999.758-3 .88 1.018-.604 2.633-1.862 3-3-.951.559-2.671 1.156-3.793 1.372C31.311 15.422 30.033 15 28.617 15 25.897 15 24 17.305 24 20v2c-4 0-7.9-3.047-10.327-6-.427.721-.667 1.565-.667 2.457.0 1.819 1.671 3.665 2.994 4.543-.807-.025-2.335-.641-3-1 0 .016.0.036.0.057.0 2.367 1.661 3.974 3.912 4.422C16.501 26.592 16 27 14.072 27c.626 1.935 3.773 2.958 5.928 3-1.686 1.307-4.692 2-7 2-.399.0-.615.022-1-.023C14.178 33.357 17.22 34 20 34c9.057.0 14-6.918 14-13.37.0-.212-.007-.922-.018-1.13C34.95 18.818 35.342 18.104 36 17.12"/></svg>
</a><a href=https://instagram.com aria-label=instagram><svg viewBox="0 0 48 48" width="48" height="48"><radialGradient id="yOrnnhliCrdS2gy~4tD8ma" cx="19.38" cy="42.035" r="44.899" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#fd5"/><stop offset=".328" stop-color="#ff543f"/><stop offset=".348" stop-color="#fc5245"/><stop offset=".504" stop-color="#e64771"/><stop offset=".643" stop-color="#d53e91"/><stop offset=".761" stop-color="#cc39a4"/><stop offset=".841" stop-color="#c837ab"/></radialGradient><path fill="url(#yOrnnhliCrdS2gy~4tD8ma)" d="M34.017 41.99l-20 .019c-4.4.004-8.003-3.592-8.008-7.992l-.019-20c-.004-4.4 3.592-8.003 7.992-8.008l20-.019c4.4-.004 8.003 3.592 8.008 7.992l.019 20C42.014 38.383 38.417 41.986 34.017 41.99z"/><radialGradient id="yOrnnhliCrdS2gy~4tD8mb" cx="11.786" cy="5.54" r="29.813" gradientTransform="matrix(1 0 0 .6663 0 1.849)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#4168c9"/><stop offset=".999" stop-color="#4168c9" stop-opacity="0"/></radialGradient><path fill="url(#yOrnnhliCrdS2gy~4tD8mb)" d="M34.017 41.99l-20 .019c-4.4.004-8.003-3.592-8.008-7.992l-.019-20c-.004-4.4 3.592-8.003 7.992-8.008l20-.019c4.4-.004 8.003 3.592 8.008 7.992l.019 20C42.014 38.383 38.417 41.986 34.017 41.99z"/><path fill="#fff" d="M24 31c-3.859.0-7-3.14-7-7s3.141-7 7-7 7 3.14 7 7-3.141 7-7 7zm0-12c-2.757.0-5 2.243-5 5s2.243 5 5 5 5-2.243 5-5-2.243-5-5-5z"/><circle cx="31.5" cy="16.5" r="1.5" fill="#fff"/><path fill="#fff" d="M30 37H18c-3.859.0-7-3.14-7-7V18c0-3.86 3.141-7 7-7h12c3.859.0 7 3.14 7 7v12c0 3.86-3.141 7-7 7zM18 13c-2.757.0-5 2.243-5 5v12c0 2.757 2.243 5 5 5h12c2.757.0 5-2.243 5-5V18c0-2.757-2.243-5-5-5H18z"/></svg>
</a><a href=https://facebook.com aria-label=facebook><svg viewBox="0 0 48 48" width="48" height="48"><path fill="#3F51B5" d="M42 37c0 2.762-2.238 5-5 5H11c-2.761.0-5-2.238-5-5V11c0-2.762 2.239-5 5-5h26c2.762.0 5 2.238 5 5V37z"/><path fill="#FFF" d="M34.368 25H31v13h-5V25h-3v-4h3v-2.41c.002-3.508 1.459-5.59 5.592-5.59H35v4h-2.287C31.104 17 31 17.6 31 18.723V21h4L34.368 25z"/></svg></a></div><div class="container py-4"><div class="row justify-content-center"><div class="col-md-4 text-center"><div class=pb-2><a href=https://containeers.github.io/ title=Containeers><img alt="Footer logo" src=/fav.png height=40px width=40px></a></div>&copy; 2025 All rights reserved<div class=text-secondary>Made with
<span class=text-danger>&#10084;
</span>and
<a href=https://github.com/gurusabarish/hugo-profile target=_blank title="Designed and developed by gurusabarish">Hugo Profile</a></div></div></div></div></footer><script src=/bootstrap-5/js/bootstrap.bundle.min.js></script><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))});var tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')),tooltipList=tooltipTriggerList.map(function(e){return new bootstrap.Tooltip(e)})</script><script src=/js/search.js></script><script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){mermaid.initialize({startOnLoad:!0,theme:document.body.className.includes("dark")?"dark":"default",securityLevel:"loose",flowchart:{htmlLabels:!0,curve:"basis"}});const e=new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.length&&mermaid.init(0[0],".language-mermaid")})});e.observe(document.body,{childList:!0,subtree:!0}),mermaid.init(0[0],".language-mermaid")})</script><section id=search-content class=py-2><div class=container id=search-results></div></section></body></html>